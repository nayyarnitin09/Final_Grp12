@model IEnumerable<ProjectTeam12_Latest.Models.CarDetail>

@{
    ViewBag.Title = "Car Details";
}

<div style="height:50px;">

</div>
<div>
    <div style="display:inline-block;">
        <h4>Inventory Details</h4>
    </div>
    <div style="display:inline-block;float:right;">
       <h4> @Html.ActionLink("Add New Details", "Create")</h4>
    </div>
</div>
<div style="height:20px;">

</div>

<div style="width:100%;">
    <table class="index">
        <tr class="header">
            <td>
                @Html.DisplayNameFor(model => model.ListPrice)
            </td>
            <td>
                @Html.DisplayNameFor(model => model.DiscountPercentage)
            </td>
            <td>
                @Html.Label("CurrentPrice")
            </td>
            <td>
                @Html.DisplayNameFor(model => model.ListingDate)
            </td>

            <td>
                @Html.DisplayNameFor(model => model.ModelNumber)
            </td>
            <td>
                @Html.DisplayNameFor(x=>x.CompanyDetail.CompanyName)
            </td>
             <td>
                @Html.DisplayNameFor(x=>x.EngineType)
            </td>
            <td>
                @Html.DisplayNameFor(x=>x.SittingCapacity)
            </td>
              <td>
                @Html.DisplayNameFor(x=>x.Performance)
            </td>
            <td>
                @Html.DisplayNameFor(model => model.CostPrice)
            </td>

            <td>
                @Html.Label("SP")
            </td>
            <td>
                @Html.Label("Profit/Loss")
            </td>

            <td>
                @Html.Label("SellDate")
            </td>
            <td>
                @Html.Label("TI")
            </td>

            <td>
                Customer
            </td>
             <td>
                Modify
            </td>
            <td>
                Status
            </td>
        </tr>

        @foreach (var item in Model) {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.ListPrice)
                </td>
                @if(item.DiscountPercentage==null && item.TimeInInventory()>60)
        {
                    <td> 25</td>
        }
       else if(item.DiscountPercentage==null && item.TimeInInventory()<60)
       {
        <td> 0</td>
       }
       else
       {
        <td>
            @Html.DisplayFor(modelItem => item.DiscountPercentage)
        </td>
       }
                @if(item.IsSold())
        {
                    <td>
                        --
                    </td>
        }
        else
        {
                    <td>
                        @item.CurrentPrice()
                    </td>
        }
                <td>
                    @Html.DisplayFor(modelItem => item.ListingDate)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.ModelNumber)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CompanyDetail.CompanyName)
                </td>
                 <td>
                    @Html.DisplayFor(modelItem => item.EngineType)
                </td>
                 <td>
                    @Html.DisplayFor(modelItem => item.SittingCapacity)
                </td>
                 <td>
                    @Html.DisplayFor(modelItem => item.Performance)
                </td>


                <td>
                    @Html.DisplayFor(modelItem => item.CostPrice)
                </td>

                @if (item.IsSold() == true)
        {
                    <td>
                        @Html.DisplayFor(modelItem => item.SellPrice)
                    </td>

                    <td>
                        @item.Profit()
                    </td>


                    <td>
                        @Html.DisplayFor(modelItem => item.SellDate)
                    </td>
                    <td>
                        @item.TimeInInventory()
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.CustomerName)
                    </td>
                    <td>

                        @Html.ActionLink("Details", "Details", new { id=item.CarId })

                    </td>

                    <td>
                        <a id="soldLink" style="background-color:red;"><em>Sold</em></a>
                    </td>
        }
        else
        {

                    <td>
                        --
                    </td>
                    <td>
                        --
                    </td>
                    <td>
                        --
                    </td>
                    <td>
                        @item.TimeInInventory()
                    </td>
                    <td>
                        --
                    </td>
                    <td>
                        @Html.ActionLink("Edit", "Edit", new { id = item.CarId }) |
                        @Html.ActionLink("Details", "Details", new { id = item.CarId }) |
                        @Html.ActionLink("Delete", "Delete", new { id = item.CarId })

                    </td>

                    <td>
                        <em>@Html.ActionLink("Sell", "Sale", "CheckOut", new { id = item.CarId }, new { target = "" })</em>
                    </td>
        }
            </tr>
}

    </table>
</div>
<div style="height:15px;">

</div>
<div>
    <img  src="~/Images/canvas.png" />
</div>
